<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>₿AZAR TCM — рынок без границ</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
<style>
body {margin:0;font-family:Arial,sans-serif;background:#b1e2b1;min-height:100vh;color:#333;}
body::before{content:"";position:fixed;inset:0;background-image:url('uzor.jpg');background-repeat:repeat;background-size:400px;opacity:0.8;z-index:0;pointer-events:none;}
header{display:flex;justify-content:space-between;align-items:center;background:#222;padding:10px 20px;color:white;position:sticky;top:0;z-index:100;flex-wrap:wrap;}
.logo{font-size:24px;font-weight:bold;}
.tcm{font-family:'Courier New', monospace;color:#4a90e2;}
.header-center{display:flex;flex:1;max-width:500px;margin:5px 10px;}
.header-center input{flex:1;padding:6px 10px;border-radius:4px 0 0 4px;border:none;}
.header-center button{padding:6px 12px;background:#4a90e2;color:white;border:none;border-radius:0 4px 4px 0;cursor:pointer;}
.header-center button:hover{background:#3578c4;}
.header-right .add-btn{padding:8px 15px;background:#4a90e2;color:white;border:none;border-radius:6px;cursor:pointer;}
.header-right .add-btn:hover{background:#3578c4;}
.categories{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:15px;padding:20px;position:relative;z-index:1;}
.category{background: rgba(255,255,255,0.9); border-radius:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1); text-align:center; padding:20px; cursor:pointer; transition:0.3s; position:relative;}
.category:hover{transform:translateY(-3px); box-shadow:0 6px 12px rgba(0,0,0,0.25);}
.category i{font-size:36px;margin-bottom:10px;color:#4a90e2;}
.subcategories-container{position:absolute;top:100%;left:0;background:rgba(255,255,255,0.98);border-radius:8px;box-shadow:0 6px 15px rgba(0,0,0,0.25);padding:10px;margin-top:5px;opacity:0;transform:translateY(-10px);transition:opacity 0.4s ease, transform 0.4s ease, max-height 0.4s ease;pointer-events:none;max-height:0;overflow:hidden;z-index:20;width:300px;}
.subcategories-container.show{opacity:1;transform:translateY(0);pointer-events:auto;max-height:1500px;overflow-y:auto;}
.subcategories-container div{padding:8px 12px;cursor:pointer;border-radius:4px;transition:all 0.3s;}
.subcategories-container div:hover{background:linear-gradient(90deg,#e6f0ff,#cce0ff);transform:translateX(5px);}
.ads-container{padding:20px;max-width:900px;margin:0 auto;position:relative;z-index:1;}
.ad{background:white;padding:10px;margin-bottom:10px;border-radius:6px;box-shadow:0 2px 5px rgba(0,0,0,0.1);}
.ad-title{font-weight:bold;font-size:16px;}
.ad-price{color:green;font-weight:bold;margin-top:4px;}
footer{background:#222;color:white;text-align:center;padding:20px;font-size:14px;}
footer a{color:#00aced;text-decoration:none;}
footer a:hover{text-decoration:underline;}
@media(max-width:768px){header{flex-direction:column;align-items:flex-start;}.header-center{width:100%;max-width:none;margin:5px 0;}.header-right{width:100%;display:flex;justify-content:flex-start;margin-bottom:5px;}.subcategories-container{position:static;box-shadow:none;max-height:none;}}
</style>
</head>
<body>

<header>
  <div class="logo">₿AZAR <span class="tcm">TCM</span></div>
  <div class="header-center">
    <input type="text" placeholder="Поиск по объявлениям..." />
    <button onclick="alert('Поиск пока не настроен')">Найти</button>
  </div>
  <div class="header-right">
    <button class="add-btn" onclick="window.open('https://t.me/BazarTcmBot','_blank')">➕ Разместить объявление</button>
  </div>
</header>

<section class="categories" id="categories"></section>
<div id="subContainer" class="subcategories-container"></div>

<section class="ads-container" id="adsContainer">
  <h2>Последние объявления</h2>
</section>

<footer>
  <p>₿AZAR TCM — рынок без границ © 2025</p>
  <p>Размещение объявлений через Telegram <a href="https://t.me/BazarTcmBot" target="_blank">@BazarTcmBot</a></p>
  <p><a href="#">Политика конфиденциальности</a> | <a href="#">Пользовательское соглашение</a></p>
</footer>

<script>
const categories = [
  {name:"Авто", icon:"bi-car-front"},
  {name:"Недвижимость", icon:"bi-house-door"},
  {name:"Работа", icon:"bi-briefcase"},
  {name:"Одежда, обувь, аксессуары", icon:"bi-bag"},
  {name:"Хобби и отдых", icon:"bi-controller"},
  {name:"Животные", icon:"bi-paw"},
  {name:"Готовый бизнес и оборудование", icon:"bi-building"},
  {name:"Услуги", icon:"bi-tools"},
  {name:"Электроника", icon:"bi-phone"},
  {name:"Для дома и дачи", icon:"bi-lamp"},
  {name:"Запчасти", icon:"bi-gear"},
  {name:"Товары для детей", icon:"bi-emoji-smile"},
  {name:"Жильё для путешествия", icon:"bi-globe"},
  {name:"Красота и здоровье", icon:"bi-heart"}
];

const subcategories = {
  "Авто":["Автомобили","Мотоциклы","Скутеры","Грузовики","Водный транспорт"],
  "Недвижимость":["Квартиры","Дома","Участки","Аренда"],
  "Работа":["Вакансии","Резюме"],
  "Одежда, обувь, аксессуары":["Женская одежда","Мужская одежда","Обувь","Аксессуары","Сумки"],
  "Хобби и отдых":["Спорт","Игры","Книги","Туризм","Музыка"],
  "Животные":["Собаки","Кошки","Птицы","Рыбы","Грызуны"],
  "Готовый бизнес и оборудование":["Продажа бизнеса","Оборудование","Франшизы"],
  "Услуги":["Ремонт","Образование","Красота","Доставка"],
  "Электроника":["Телефоны","Компьютеры","Планшеты","Телевизоры","Аудио и видео"],
  "Для дома и дачи":["Мебель","Инструменты","Сад и огород","Освещение"],
  "Запчасти":["Автозапчасти","Мотозапчасти","Комплектующие для техники"],
  "Товары для детей":["Игрушки","Одежда","Коляски","Товары для школы"],
  "Жильё для путешествия":["Отели","Апартаменты","Хостелы","Квартиры посуточно"],
  "Красота и здоровье":["Косметика","Парфюмерия","Средства гигиены","Фитнес и здоровье"]
};

const catSection=document.getElementById("categories");
const subContainer=document.getElementById("subContainer");
categories.forEach(cat=>{
  const div=document.createElement("div");
  div.className="category";
  div.innerHTML=`<i class="bi ${cat.icon}"></i><h3>${cat.name}</h3>`;
  catSection.appendChild(div);

  div.addEventListener("mouseenter",()=>{
    const subs=subcategories[cat.name];
    if(!subs) return;
    subContainer.innerHTML="";
    subs.forEach(sub=>{
      const subItem=document.createElement("div");
      subItem.innerText=sub;
      subItem.addEventListener("click",e=>{
        e.stopPropagation();
        alert(`Вы выбрали: ${sub}`);
      });
      subContainer.appendChild(subItem);
    });
    const rect=div.getBoundingClientRect();
    subContainer.style.top=rect.bottom+window.scrollY+"px";
    subContainer.style.left=rect.left+window.scrollX+"px";
    subContainer.classList.add("show");
  });
});
document.addEventListener("click",e=>{if(!e.target.closest(".category")) subContainer.classList.remove("show");});

// Загрузка объявлений с синхронизацией с ботом
async function loadAds(){
  try{
    const res=await fetch("ads.json");
    const ads=await res.json();
    const container=document.getElementById("adsContainer");
    container.innerHTML='<h2>Последние объявления</h2>';
    ads.forEach(ad=>{
      const div=document.createElement("div");
      div.className="ad";
      div.innerHTML=`<div class="ad-title">${ad.title}</div>
                     <div class="ad-price">${ad.price} ${ad.currency}</div>
                     <div class="ad-date">${ad.date}</div>
                     <div class="ad-user">От: ${ad.user}</div>`;
      container.appendChild(div);
    });
  }catch(err){console.log("Ошибка загрузки ads.json:",err);}
}
loadAds();
</script>

</body>
</html>
